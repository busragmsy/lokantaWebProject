@using lokantaWebProject.Entities
@{
    ViewData["Title"] = "Dashboard"; // Tarayıcı sekmesinde görünecek başlık
    Layout = "~/Views/Shared/_Layout.cshtml"; // Kullandığınız ana layout dosyanız
    // Eğer admin paneli için özel bir layout'unuz varsa: Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="row">
    @await Html.PartialAsync("View")
</div> 

<div class="row mt-4">
    @await Html.PartialAsync("_LatestMenu")
</div>

<div class="row mt-4">
    <div class="col-md-6">
        @await Html.PartialAsync("_Gallery", ViewData["GalleryImages"])
    </div>
    <div class="col-md-6">
        @await Html.PartialAsync("_ToDoList", ViewData["ToDos"])
    </div>
</div>


<div class="row mt-4">
    <div class="col-lg-12 stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Son Admin Girişleri</h4>
                <p class="card-description">Admin paneline yapılan en son <code>giriş kayıtları</code>.</p>
                <div class="table-responsive">
                    <table class="table table-bordered table-contextual">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Kullanıcı Adı</th>
                                <th>Giriş Zamanı</th>
                                <th>Durum</th>
                                <th>IP Adresi</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                            @if (ViewBag.LatestLoginLogs != null && ViewBag.LatestLoginLogs.Count > 0)
                            {
                                foreach (var log in ViewBag.LatestLoginLogs)
                                {
                                    var rowClass = log.IsSuccessful ? "table-primary" : "table-danger";
                                    var durum = log.IsSuccessful ? "Başarılı" : "Başarısız";
                                    <tr class="@rowClass">
                                        <td>@log.Id</td>
                                        <td>@log.UserName</td>
                                        <td>@log.LoginTime.ToString("dd.MM.yyyy HH:mm:ss")</td>
                                        <td>@durum</td>
                                        <td>@log.IpAddress</td>
                                        
                                    </tr>
                                }
                            }
                            else
                            {
                                <tr>
                                    <td colspan="6">Henüz giriş kaydı bulunmuyor.</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

